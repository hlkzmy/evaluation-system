<?php

namespace Evaluation\CommonBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * EvaluationRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class EvaluationRepository extends EntityRepository
{
	
	/**
	 * JOIN 查询，查询学校名称
	 */
	
	public function getEvaluationList(){
	
		$result = $this->getEntityManager()->createQuery(
													"SELECT e.id,e.name,e.startTime,e.endTime,
															s.name as schoolName
													 FROM EvaluationCommonBundle:Evaluation e,
													 	  EvaluationCommonBundle:EvaluateSchool s
													 WHERE  e.schoolId = s.id"
		)->getArrayResult();
	
		return $result;
	}
	
}
